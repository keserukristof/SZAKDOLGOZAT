{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kristof\\\\Documents\\\\GitHub\\\\SZAKDOLGOZAT\\\\your-time-frontend\\\\src\\\\components\\\\time-table\\\\TimeTableComponent.js\";\n\n/* eslint-disable react/destructuring-assignment */\nimport * as React from 'react';\nimport { ViewState, EditingState } from '@devexpress/dx-react-scheduler';\nimport { Scheduler, WeekView, Appointments, AppointmentForm, AppointmentTooltip, DragDropProvider, EditRecurrenceMenu, AllDayPanel, MonthView, Toolbar, TodayButton, DateNavigator, ViewSwitcher, ConfirmationDialog } from '@devexpress/dx-react-scheduler-material-ui';\nimport Paper from '@material-ui/core/Paper';\nconst dragDisableIds = new Set([]);\n\nconst allowDrag = ({\n  id\n}) => !dragDisableIds.has(id);\n\nconst appointmentComponent = props => {\n  if (allowDrag(props.data)) {\n    return React.createElement(Appointments.Appointment, Object.assign({}, props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29\n      },\n      __self: this\n    }));\n  }\n\n  return React.createElement(Appointments.Appointment, Object.assign({}, props, {\n    style: { ...props.style,\n      cursor: 'not-allowed'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }));\n};\n\nclass TimeTableComponent extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      currentDate: new Date(),\n      addedAppointment: {},\n      appointmentChanges: {},\n      editingAppointmentId: undefined\n    };\n    this.onCommitChanges = this.commitChanges.bind(this);\n    this.changeAddedAppointment = this.changeAddedAppointment.bind(this);\n    this.changeAppointmentChanges = this.changeAppointmentChanges.bind(this);\n    this.changeEditingAppointmentId = this.changeEditingAppointmentId.bind(this);\n  }\n\n  componentDidMount() {\n    fetch('/api/appointments').then(res => res.json()).then(appointments => {\n      if (appointments) {\n        for (const appointment of appointments) {\n          appointment.startDate = new Date(appointment.startDate);\n          appointment.endDate = new Date(appointment.endDate);\n        }\n      }\n\n      this.setState({\n        data: appointments\n      }, () => {\n        console.log('Appointments fetched', appointments);\n      });\n    });\n  }\n\n  changeAddedAppointment(addedAppointment) {\n    this.setState({\n      addedAppointment\n    });\n  }\n\n  changeAppointmentChanges(appointmentChanges) {\n    this.setState({\n      appointmentChanges\n    });\n  }\n\n  changeEditingAppointmentId(editingAppointmentId) {\n    this.setState({\n      editingAppointmentId\n    });\n  }\n\n  commitChanges({\n    added,\n    changed,\n    deleted\n  }) {\n    this.setState(state => {\n      let {\n        data\n      } = state;\n\n      if (added) {\n        const startingAddedId = data.length > 0 ? data[data.length - 1].id + 1 : 0;\n        data = [...data, {\n          id: startingAddedId,\n          ...added\n        }];\n        fetch('/api/appointments', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(data[data.length - 1])\n        }).then(result => {\n          console.log(result);\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n\n      if (changed) {\n        let chanhedAppointmentId;\n        data = data.map(appointment => {\n          if (changed[appointment.id]) {\n            chanhedAppointmentId = appointment.id;\n            return { ...appointment,\n              ...changed[appointment.id]\n            };\n          }\n\n          return appointment;\n        });\n        fetch('api/appointments', {\n          method: 'PATCH',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(data[chanhedAppointmentId])\n        }).then(result => {\n          console.log(result);\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n\n      if (deleted !== undefined) {\n        let deletedId;\n        data = data.filter(appointment => {\n          if (appointment.id === deleted) {\n            deletedId = appointment.id;\n          }\n\n          return appointment.id !== deleted;\n        });\n        fetch('http://localhost:5000/api/appointments/', {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            id: deletedId\n          })\n        }).then(response => console.log(response)).catch(err => console.log(err));\n      }\n\n      return {\n        data\n      };\n    });\n  }\n\n  render() {\n    const {\n      data,\n      currentDate,\n      addedAppointment,\n      appointmentChanges,\n      editingAppointmentId\n    } = this.state;\n    return React.createElement(Paper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(Scheduler, {\n      data: data,\n      height: 750,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(ViewState, {\n      defaultCurrentDate: currentDate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), React.createElement(EditingState, {\n      onCommitChanges: this.onCommitChanges,\n      addedAppointment: addedAppointment,\n      onAddedAppointmentChange: this.changeAddedAppointment,\n      appointmentChanges: appointmentChanges,\n      onAppointmentChangesChange: this.changeAppointmentChanges,\n      editingAppointmentId: editingAppointmentId,\n      onEditingAppointmentIdChange: this.changeEditingAppointmentId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }), React.createElement(WeekView, {\n      startDayHour: 7,\n      endDayHour: 20,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }), React.createElement(MonthView, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), React.createElement(AllDayPanel, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }), React.createElement(EditRecurrenceMenu, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }), React.createElement(ConfirmationDialog, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }), React.createElement(Toolbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }), React.createElement(TodayButton, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }), React.createElement(DateNavigator, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }), React.createElement(ViewSwitcher, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }), React.createElement(ConfirmationDialog, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }), React.createElement(Appointments, {\n      appointmentComponent: appointmentComponent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }), React.createElement(AppointmentTooltip, {\n      showOpenButton: true,\n      showDeleteButton: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }), React.createElement(AppointmentForm, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }), React.createElement(DragDropProvider, {\n      allowDrag: allowDrag,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default TimeTableComponent;","map":{"version":3,"sources":["C:/Users/Kristof/Documents/GitHub/SZAKDOLGOZAT/your-time-frontend/src/components/time-table/TimeTableComponent.js"],"names":["React","ViewState","EditingState","Scheduler","WeekView","Appointments","AppointmentForm","AppointmentTooltip","DragDropProvider","EditRecurrenceMenu","AllDayPanel","MonthView","Toolbar","TodayButton","DateNavigator","ViewSwitcher","ConfirmationDialog","Paper","dragDisableIds","Set","allowDrag","id","has","appointmentComponent","props","data","style","cursor","TimeTableComponent","PureComponent","constructor","state","currentDate","Date","addedAppointment","appointmentChanges","editingAppointmentId","undefined","onCommitChanges","commitChanges","bind","changeAddedAppointment","changeAppointmentChanges","changeEditingAppointmentId","componentDidMount","fetch","then","res","json","appointments","appointment","startDate","endDate","setState","console","log","added","changed","deleted","startingAddedId","length","method","headers","body","JSON","stringify","result","catch","err","chanhedAppointmentId","map","deletedId","filter","response","render"],"mappings":"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","sourcesContent":["/* eslint-disable react/destructuring-assignment */\nimport * as React from 'react';\n\nimport { ViewState, EditingState } from '@devexpress/dx-react-scheduler';\nimport {\n  Scheduler,\n  WeekView,\n  Appointments,\n  AppointmentForm,\n  AppointmentTooltip,\n  DragDropProvider,\n  EditRecurrenceMenu,\n  AllDayPanel,\n  MonthView,\n  Toolbar,\n  TodayButton,\n  DateNavigator,\n  ViewSwitcher,\n  ConfirmationDialog,\n} from '@devexpress/dx-react-scheduler-material-ui';\n\nimport Paper from '@material-ui/core/Paper';\n\nconst dragDisableIds = new Set([]);\n\nconst allowDrag = ({ id }) => !dragDisableIds.has(id);\nconst appointmentComponent = (props) => {\n  if (allowDrag(props.data)) {\n    return <Appointments.Appointment {...props} />;\n  }\n  return (\n    <Appointments.Appointment\n      {...props}\n      style={{ ...props.style, cursor: 'not-allowed' }}\n    />\n  );\n};\n\nclass TimeTableComponent extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: [],\n      currentDate: new Date(),\n\n      addedAppointment: {},\n      appointmentChanges: {},\n      editingAppointmentId: undefined,\n    };\n\n    this.onCommitChanges = this.commitChanges.bind(this);\n    this.changeAddedAppointment = this.changeAddedAppointment.bind(this);\n    this.changeAppointmentChanges = this.changeAppointmentChanges.bind(this);\n    this.changeEditingAppointmentId = this.changeEditingAppointmentId.bind(\n      this\n    );\n  }\n\n  componentDidMount() {\n    fetch('/api/appointments')\n      .then((res) => res.json())\n      .then((appointments) => {\n        if (appointments) {\n          for (const appointment of appointments) {\n            appointment.startDate = new Date(appointment.startDate);\n            appointment.endDate = new Date(appointment.endDate);\n          }\n        }\n        this.setState({ data: appointments }, () => {\n          console.log('Appointments fetched', appointments);\n        });\n      });\n  }\n\n  changeAddedAppointment(addedAppointment) {\n    this.setState({ addedAppointment });\n  }\n\n  changeAppointmentChanges(appointmentChanges) {\n    this.setState({ appointmentChanges });\n  }\n\n  changeEditingAppointmentId(editingAppointmentId) {\n    this.setState({ editingAppointmentId });\n  }\n\n  commitChanges({ added, changed, deleted }) {\n    this.setState((state) => {\n      let { data } = state;\n      if (added) {\n        const startingAddedId =\n          data.length > 0 ? data[data.length - 1].id + 1 : 0;\n        data = [...data, { id: startingAddedId, ...added }];\n        fetch('/api/appointments', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(data[data.length - 1]),\n        })\n          .then((result) => {\n            console.log(result);\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n      }\n      if (changed) {\n        let chanhedAppointmentId;\n        data = data.map((appointment) => {\n          if (changed[appointment.id]) {\n            chanhedAppointmentId = appointment.id;\n            return { ...appointment, ...changed[appointment.id] };\n          }\n          return appointment;\n        });\n\n        fetch('api/appointments', {\n          method: 'PATCH',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(data[chanhedAppointmentId]),\n        })\n          .then((result) => {\n            console.log(result);\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n      }\n      if (deleted !== undefined) {\n        let deletedId;\n        data = data.filter((appointment) => {\n          if (appointment.id === deleted) {\n            deletedId = appointment.id;\n          }\n          return appointment.id !== deleted;\n        });\n        fetch('http://localhost:5000/api/appointments/', {\n          method: 'DELETE',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ id: deletedId }),\n        })\n          .then((response) => console.log(response))\n          .catch((err) => console.log(err));\n      }\n      return { data };\n    });\n  }\n\n  render() {\n    const {\n      data,\n      currentDate,\n      addedAppointment,\n      appointmentChanges,\n      editingAppointmentId,\n    } = this.state;\n\n    return (\n      <Paper>\n        <Scheduler data={data} height={750}>\n          <ViewState defaultCurrentDate={currentDate} />\n          <EditingState\n            onCommitChanges={this.onCommitChanges}\n            addedAppointment={addedAppointment}\n            onAddedAppointmentChange={this.changeAddedAppointment}\n            appointmentChanges={appointmentChanges}\n            onAppointmentChangesChange={this.changeAppointmentChanges}\n            editingAppointmentId={editingAppointmentId}\n            onEditingAppointmentIdChange={this.changeEditingAppointmentId}\n          />\n          <WeekView startDayHour={7} endDayHour={20} />\n          <MonthView />\n          <AllDayPanel />\n          <EditRecurrenceMenu />\n          <ConfirmationDialog />\n          <Toolbar />\n          <TodayButton />\n          <DateNavigator />\n          <ViewSwitcher />\n          <ConfirmationDialog />\n          <Appointments appointmentComponent={appointmentComponent} />\n          <AppointmentTooltip showOpenButton showDeleteButton />\n          <AppointmentForm />\n          <DragDropProvider allowDrag={allowDrag} />\n        </Scheduler>\n      </Paper>\n    );\n  }\n}\n\nexport default TimeTableComponent;\n"]},"metadata":{},"sourceType":"module"}